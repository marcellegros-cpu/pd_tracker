{% extends "base.html" %}

{% block title %}Medications - PD Tracker{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Medications</h1>
    <div class="header-actions">
        <a href="{{ url_for('meds_manage') }}" class="btn btn-secondary">Manage</a>
        <a href="{{ url_for('meds_history') }}" class="btn btn-secondary">History</a>
    </div>
</div>

<!-- Quick Take Buttons -->
<section class="card">
    <h2>Take Medication</h2>
    <div class="med-buttons">
        {% for med in medications %}
        <form action="{{ url_for('take_med', med_id=med.id) }}" method="post" class="inline-form">
            <button type="submit" class="btn btn-primary btn-large btn-block">
                {{ med.name }}
                {% if med.dosage %}<br><small>{{ med.dosage }}</small>{% endif %}
            </button>
        </form>
        {% endfor %}
    </div>
</section>

<!-- Today's Status -->
<section class="card">
    <h2>Today's Status</h2>
    {% if med_status %}
        {% for med in med_status %}
        <div class="status-item">
            <div class="status-name">
                <strong>{{ med.name }}</strong>
                {% if med.dosage %}<span class="muted">({{ med.dosage }})</span>{% endif %}
            </div>
            <div class="status-details">
                <span class="badge badge-large">{{ med.doses_today }} doses</span>
            </div>
            {% if med.dose_times %}
            <div class="dose-times">
                Times:
                {% for time in med.dose_times %}
                    <span class="badge badge-small">{{ time|time12 }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}
        <p class="muted">No medications set up. Use the CLI to add medications:</p>
        <code>pd med add</code>
    {% endif %}
</section>
{% endblock %}
